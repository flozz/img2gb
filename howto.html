

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Howto Generate a Tileset and a Tilemap (CLI) &mdash; img2gb  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=7ab3649f" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CLI" href="cli.html" />
    <link rel="prev" title="Installing img2gb" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            img2gb
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing img2gb</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Howto Generate a Tileset and a Tilemap (CLI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#generating-a-tileset">Generating a Tileset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generating-a-tilemap">Generating a Tilemap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-generated-code-in-a-gameboy-program">Using the Generated Code in a GameBoy Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="#links">Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">Python API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">img2gb</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Howto Generate a Tileset and a Tilemap (CLI)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/howto.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="howto-generate-a-tileset-and-a-tilemap-cli">
<h1>Howto Generate a Tileset and a Tilemap (CLI)<a class="headerlink" href="#howto-generate-a-tileset-and-a-tilemap-cli" title="Link to this heading"></a></h1>
<p>In this <em>howtow</em>, I will explain how to convert the image bellow to a GameBoy
Tileset and a Tilemap that will be usable in a program to display the image on
a real GameBoy (or on an emulator).</p>
<p>The image we want to display in our GameBoy program:</p>
<figure class="align-default">
<img alt="Example image to covert" src="_images/img.png" />
</figure>
<section id="generating-a-tileset">
<h2>Generating a Tileset<a class="headerlink" href="#generating-a-tileset" title="Link to this heading"></a></h2>
<p>First we have to convert the image into a <strong>GameBoy tileset</strong>… but what is
a tileset ? To be displayed on a GameBoy, an image must be cut into 8x8 pixel
pieces called <strong>tiles</strong>. A tileset is just… a set of tiles.</p>
<p>To generate the tileset, the command to use is the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">img2gb</span> <span class="n">tileset</span> \
    <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">file</span><span class="o">=</span><span class="n">tileset</span><span class="o">.</span><span class="n">c</span> \
    <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">header</span><span class="o">-</span><span class="n">file</span><span class="o">=</span><span class="n">tileset</span><span class="o">.</span><span class="n">h</span> \
    <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">image</span><span class="o">=</span><span class="n">tileset</span><span class="o">.</span><span class="n">png</span> \
    <span class="o">--</span><span class="n">deduplicate</span> \
    <span class="n">img</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For readability reason, I wrote the command on multiple lines using
backslashes… you can of course write it on one line :)</p>
</div>
<p>Let’s explain the above command line:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tileset</span></code> tells img2gb that we whant to generates a tileset,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output-c-file=tileset.c</span></code> is the path of the output <code class="docutils literal notranslate"><span class="pre">.c</span></code> file that will
contain the data of the tiles,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output-header-file=tileset.h</span></code> is the path of the output <code class="docutils literal notranslate"><span class="pre">.h</span></code> file that
will contain information about the tileset (variable declaration and number
of tiles),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output-image=tileset.png</span></code> is the path of the image that represents the
tileset. It is useful to view what is in the <code class="docutils literal notranslate"><span class="pre">.c</span></code> file in a more readable
way. This image is also mandatory yo generate a tilemap.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--deduplicate</span></code> avoids img2gb to include duplicate tiles (in our example,
this is mandatory as the input image is composed of 360 tiles and the video
memory of the GameBoy can contain only 255 tiles…),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">img.png</span></code> is the path of the input image.</p></li>
</ul>
<p>Now let’s see the result of the above command:</p>
<ul>
<li><p><a class="reference external" href="https://github.com/flozz/img2gb/blob/master/example/tileset.c">tileset.c (truncated)</a>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// This file was generated by img2gb, DO NOT EDIT</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;types.h&gt;</span>

<span class="k">const</span><span class="w"> </span><span class="n">UINT8</span><span class="w"> </span><span class="n">TILESET</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w">  </span><span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/flozz/img2gb/blob/master/example/tileset.h">tileset.h</a>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// This file was generated by img2gb, DO NOT EDIT</span>

<span class="cp">#ifndef _TILESET_H</span>
<span class="cp">#define _TILESET_H</span>

<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UINT8</span><span class="w"> </span><span class="n">TILESET</span><span class="p">[];</span>
<span class="cp">#define TILESET_TILE_COUNT 97</span>


<span class="cp">#endif</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/flozz/img2gb/blob/master/example/tileset.png">tileset.png</a>:</p>
<figure class="align-default">
<img alt="Result tileset image" src="_images/tileset.png" />
</figure>
</li>
</ul>
</section>
<section id="generating-a-tilemap">
<h2>Generating a Tilemap<a class="headerlink" href="#generating-a-tilemap" title="Link to this heading"></a></h2>
<p>The tilemap is table that tells the GameBoy where to display each tile to
compose an image. To generate a tilemap, we first have to generate a tileset
(see previous section).</p>
<p>To generate a tilemap you can use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">img2gb</span> <span class="n">tilemap</span> \
    <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">file</span><span class="o">=</span><span class="n">tilemap</span><span class="o">.</span><span class="n">c</span> \
    <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">header</span><span class="o">-</span><span class="n">file</span><span class="o">=</span><span class="n">tilemap</span><span class="o">.</span><span class="n">h</span> \
    <span class="n">tileset</span><span class="o">.</span><span class="n">png</span> \
    <span class="n">img</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
<p>Once again, let’s explain this command:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--output-c-file=tileset.c</span></code> is the path of the output <code class="docutils literal notranslate"><span class="pre">.c</span></code> file that will
contain the data of the map,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output-header-file=tileset.h</span></code> is the path of the output <code class="docutils literal notranslate"><span class="pre">.h</span></code> file that
will contain information about the tilemap (variable declaration, with and
height),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tileset.png</span></code> is the path of the tileset image generated in the previous
section,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">img.png</span></code> is the path of the image that will be mapped using the tileset.</p></li>
</ul>
<p>Let’s take a look of the generated files:</p>
<ul>
<li><p><a class="reference external" href="https://github.com/flozz/img2gb/blob/master/example/tilemap.c">tilemap.c (truncated)</a>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// This file was generated by img2gb, DO NOT EDIT</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;types.h&gt;</span>

<span class="k">const</span><span class="w"> </span><span class="n">UINT8</span><span class="w"> </span><span class="n">TILEMAP</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span><span class="w">  </span><span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p><a class="reference external" href="https://github.com/flozz/img2gb/blob/master/example/tilemap.h">tilemap.h</a>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// This file was generated by img2gb, DO NOT EDIT</span>

<span class="cp">#ifndef _TILEMAP_H</span>
<span class="cp">#define _TILEMAP_H</span>

<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">UINT8</span><span class="w"> </span><span class="n">TILEMAP</span><span class="p">[];</span>
<span class="cp">#define TILEMAP_WIDTH 20</span>
<span class="cp">#define TILEMAP_HEIGHT 18</span>


<span class="cp">#endif</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="using-the-generated-code-in-a-gameboy-program">
<h2>Using the Generated Code in a GameBoy Program<a class="headerlink" href="#using-the-generated-code-in-a-gameboy-program" title="Link to this heading"></a></h2>
<p>In this section I will only explain how to use the generated files in a GameBoy
program that uses <a class="reference external" href="http://gbdk.sourceforge.net/">GBDK</a>. I will not explain how to make a complete GameBoy
program or how to compile it: that is not the purpose of this <em>howto</em> (but
I will put some links at the end of this document).</p>
<p>Supposing you have a working folder that looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MyProject</span><span class="o">/</span>
    <span class="o">|</span>
    <span class="o">+--</span> <span class="n">main</span><span class="o">.</span><span class="n">c</span>
    <span class="o">|</span>
    <span class="o">+--</span> <span class="n">tilemap</span><span class="o">.</span><span class="n">c</span>
    <span class="o">|</span>
    <span class="o">+--</span> <span class="n">tilemap</span><span class="o">.</span><span class="n">h</span>
    <span class="o">|</span>
    <span class="o">+--</span> <span class="n">tileset</span><span class="o">.</span><span class="n">c</span>
    <span class="o">|</span>
    <span class="o">+--</span> <span class="n">tileset</span><span class="o">.</span><span class="n">h</span>
</pre></div>
</div>
<p>Here is the minimal code to put in your <code class="docutils literal notranslate"><span class="pre">main.c</span></code> file to use the tileset and
the tilemap:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gb/gb.h&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;tileset.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;tilemap.h&quot;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Load the tileset in the video memory of the GameBoy</span>
<span class="w">    </span><span class="n">set_bkg_data</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">TILESET_TILE_COUNT</span><span class="p">,</span><span class="w"> </span><span class="n">TILESET</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Load the tilemap in the Background layer of the GameBoy</span>
<span class="w">    </span><span class="n">set_bkg_tiles</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">TILEMAP_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">TILEMAP_HEIGHT</span><span class="p">,</span><span class="w"> </span><span class="n">TILEMAP</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Make Background layer visible</span>
<span class="w">    </span><span class="n">SHOW_BKG</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>That’s it :)</p>
</section>
<section id="links">
<h2>Links<a class="headerlink" href="#links" title="Link to this heading"></a></h2>
<p>Some article I wrote about GameBoy development (in French, but Google Translate
should help):</p>
<ul class="simple">
<li><p>Article (the first one of a series) explaining how to write, compile and
execute a simple “Hello World” program on a GameBoy:
<a class="reference external" href="https://blog.flozz.fr/2018/10/01/developpement-gameboy-1-hello-world/">https://blog.flozz.fr/2018/10/01/developpement-gameboy-1-hello-world/</a></p></li>
<li><p>A more complete article on the GameBoy graphics that use the same example
that one of this document, but with more explanations:
<a class="reference external" href="https://blog.flozz.fr/2018/11/19/developpement-gameboy-5-creer-des-tilesets/#convertir-des-images-avec-img2gb">https://blog.flozz.fr/2018/11/19/developpement-gameboy-5-creer-des-tilesets/#convertir-des-images-avec-img2gb</a></p></li>
</ul>
<p>Some examples of GameBoy programs that use img2gb:</p>
<ul class="simple">
<li><p>The full code of this <em>howto</em> example (with a Makefile and a ROM):
<a class="reference external" href="https://github.com/flozz/gameboy-examples/tree/master/05-graphics2">https://github.com/flozz/gameboy-examples/tree/master/05-graphics2</a></p></li>
<li><p>An example of the Background layer use:
<a class="reference external" href="https://github.com/flozz/gameboy-examples/tree/master/06-graphics3-background">https://github.com/flozz/gameboy-examples/tree/master/06-graphics3-background</a></p></li>
</ul>
<p>More links:</p>
<ul class="simple">
<li><p>GameBoy Development Kit (GBDK): <a class="reference external" href="http://gbdk.sourceforge.net/">http://gbdk.sourceforge.net/</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="Installing img2gb" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cli.html" class="btn btn-neutral float-right" title="CLI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Fabien LOISON.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>